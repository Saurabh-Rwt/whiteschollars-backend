<div class="form-section">
  <div class="form-section-title">Hero Content</div>
  <p class="editor-note">This is the first section visitors see. Keep it crisp and job-focused.</p>
  <form method="POST" enctype="multipart/form-data" action="{% url 'dashboard' %}">
    {% csrf_token %}
    <input type="hidden" name="action" value="save_hero" />
    <input type="hidden" name="course" value="{{ selected_course.id }}" />
    <div class="row g-3">
      <div class="col-md-8">
        <label class="form-label">Hero Heading</label>
        <input type="text" class="form-control" name="heading" value="{{ hero.heading|default:'' }}" required />
      </div>
      <div class="col-md-4">
        <label class="form-label">Subheading</label>
        <input type="text" class="form-control" name="subheading" value="{{ hero.subheading|default:'' }}" />
      </div>
      <div class="col-12">
        <label class="form-label">Description</label>
        <div class="editor-note">Rich text: bold, italic, lists, links only.</div>
        <input type="hidden" name="description_html" id="hero-description-html" value="{{ hero.description_html|default:'' }}" />
        <div class="form-control" style="padding: 0;" data-quill data-target="hero-description-html"></div>
      </div>
      <div class="col-md-4">
        <label class="form-label">Badge Text</label>
        <input type="text" class="form-control" name="badge_text" value="{{ hero.badge_text|default:'' }}" />
      </div>
      <div class="col-md-4">
        <label class="form-label">Badge Icon</label>
        <input type="file" class="form-control" name="badge_icon" accept="image/*" />
        {% if hero.badge_icon %}
          <div class="media-preview">
            <img src="{{ hero.badge_icon.url }}" alt="{{ hero.badge_icon_alt|default:'Badge icon' }}" />
            <small class="text-muted">{{ hero.badge_icon_alt|default:'Badge icon' }}</small>
          </div>
        {% endif %}
      </div>
      <div class="col-md-4">
        <label class="form-label">Badge Icon Alt Text</label>
        <input type="text" class="form-control" name="badge_icon_alt" value="{{ hero.badge_icon_alt|default:'' }}" />
      </div>
      <div class="col-md-4">
        <label class="form-label">Award Text</label>
        <input type="text" class="form-control" name="award_text" value="{{ hero.award_text|default:'' }}" />
      </div>
      <div class="col-md-4">
        <label class="form-label">Award Logo</label>
        <input type="file" class="form-control" name="award_logo" accept="image/*" />
        {% if hero.award_logo %}
          <div class="media-preview">
            <img src="{{ hero.award_logo.url }}" alt="{{ hero.award_logo_alt|default:'Award logo' }}" />
            <small class="text-muted">{{ hero.award_logo_alt|default:'Award logo' }}</small>
          </div>
        {% endif %}
      </div>
      <div class="col-md-4">
        <label class="form-label">Award Logo Alt Text</label>
        <input type="text" class="form-control" name="award_logo_alt" value="{{ hero.award_logo_alt|default:'' }}" />
      </div>
      <div class="col-md-4">
        <label class="form-label">Media Type</label>
        <select class="form-select" name="media_type">
          <option value="image" {% if hero.media_type == 'image' %}selected{% endif %}>Image</option>
          <option value="video" {% if hero.media_type == 'video' %}selected{% endif %}>Video</option>
        </select>
      </div>
      <div class="col-md-4">
        <label class="form-label">Hero Image</label>
        <input type="file" class="form-control" name="hero_image" accept="image/*" />
        {% if hero.hero_image %}
          <div class="media-preview">
            <img src="{{ hero.hero_image.url }}" alt="{{ hero.hero_image_alt|default:'Hero image' }}" />
            <small class="text-muted">{{ hero.hero_image_alt|default:'Hero image' }}</small>
          </div>
        {% endif %}
      </div>
      <div class="col-md-4">
        <label class="form-label">Hero Image Alt Text</label>
        <input type="text" class="form-control" name="hero_image_alt" value="{{ hero.hero_image_alt|default:'' }}" />
      </div>
      <div class="col-md-6">
        <label class="form-label">Hero Video URL</label>
        <input type="url" class="form-control" name="hero_video_url" value="{{ hero.hero_video_url|default:'' }}" />
      </div>
      <div class="col-md-3">
        <label class="form-label">Video Thumbnail</label>
        <input type="file" class="form-control" name="hero_video_thumbnail" accept="image/*" />
        {% if hero.hero_video_thumbnail %}
          <div class="media-preview">
            <img src="{{ hero.hero_video_thumbnail.url }}" alt="{{ hero.hero_video_thumbnail_alt|default:'Video thumbnail' }}" />
            <small class="text-muted">{{ hero.hero_video_thumbnail_alt|default:'Video thumbnail' }}</small>
          </div>
        {% endif %}
      </div>
      <div class="col-md-3">
        <label class="form-label">Thumbnail Alt Text</label>
        <input type="text" class="form-control" name="hero_video_thumbnail_alt" value="{{ hero.hero_video_thumbnail_alt|default:'' }}" />
      </div>
      <div class="col-md-6">
        <label class="form-label">Collaboration Heading</label>
        <input type="text" class="form-control" name="collaboration_heading" value="{{ hero.collaboration_heading|default:'' }}" />
      </div>
    </div>
    <div class="mt-3 text-end">
      <button class="btn btn-primary" type="submit">Save Hero</button>
    </div>
  </form>
</div>

<div class="form-section">
  <div class="form-section-title">Hero Highlights</div>
  <form method="POST" action="{% url 'dashboard' %}">
    {% csrf_token %}
    <input type="hidden" name="action" value="save_hero_highlight" />
    <input type="hidden" name="course" value="{{ selected_course.id }}" />
    <input type="hidden" name="item_id" value="{% if editing.hero_highlight %}{{ editing.hero_highlight.id }}{% endif %}" />
    <div class="row g-3 align-items-end">
      <div class="col-md-9">
        <label class="form-label">Highlight Text</label>
        <input type="text" class="form-control" name="highlight_text" value="{% if editing.hero_highlight %}{{ editing.hero_highlight.text }}{% endif %}" required />
      </div>
      <div class="col-md-3 text-end">
        <button class="btn btn-outline-primary" type="submit">{% if editing.hero_highlight %}Update{% else %}Add{% endif %}</button>
      </div>
    </div>
  </form>
  <ul class="list-group list-group-flush mt-3">
    {% for item in hero_highlights %}
      <li class="list-group-item d-flex align-items-center justify-content-between">
        <span>{{ item.text }}</span>
        <div class="d-flex gap-2">
          <a class="btn btn-sm btn-ghost" href="{% url 'dashboard' %}?course={{ selected_course.id }}&section=hero&edit_key=hero_highlight&edit_id={{ item.id }}">Edit</a>
          <form method="POST" action="{% url 'dashboard' %}">
            {% csrf_token %}
            <input type="hidden" name="action" value="delete_hero_highlight" />
            <input type="hidden" name="course" value="{{ selected_course.id }}" />
            <input type="hidden" name="item_id" value="{{ item.id }}" />
            <button class="btn btn-sm btn-outline-danger" type="submit">Delete</button>
          </form>
        </div>
      </li>
    {% empty %}
      <li class="list-group-item text-muted">No highlights added yet.</li>
    {% endfor %}
  </ul>
</div>

<div class="form-section">
  <div class="form-section-title">Collaboration Logos</div>
  <form method="POST" enctype="multipart/form-data" action="{% url 'dashboard' %}">
    {% csrf_token %}
    <input type="hidden" name="action" value="save_hero_logo" />
    <input type="hidden" name="course" value="{{ selected_course.id }}" />
    <input type="hidden" name="item_id" value="{% if editing.hero_logo %}{{ editing.hero_logo.id }}{% endif %}" />
    <div class="row g-3 align-items-end">
      <div class="col-md-5">
        <label class="form-label">Logo Image</label>
        <input type="file" class="form-control" name="image" accept="image/*" {% if not editing.hero_logo %}required{% endif %} />
      </div>
      <div class="col-md-5">
        <label class="form-label">Alt Text</label>
        <input type="text" class="form-control" name="image_alt" value="{% if editing.hero_logo %}{{ editing.hero_logo.image_alt }}{% endif %}" />
      </div>
      <div class="col-md-2 text-end">
        <button class="btn btn-outline-primary" type="submit">{% if editing.hero_logo %}Update{% else %}Add{% endif %}</button>
      </div>
    </div>
  </form>
  <div class="row g-2 mt-3">
    {% for item in hero_logos %}
      <div class="col-md-6">
        <div class="d-flex align-items-center justify-content-between border rounded p-2">
          <span class="text-truncate">{{ item.image_alt|default:'Logo' }}</span>
          <div class="d-flex gap-2">
            <a class="btn btn-sm btn-ghost" href="{% url 'dashboard' %}?course={{ selected_course.id }}&section=hero&edit_key=hero_logo&edit_id={{ item.id }}">Edit</a>
            <form method="POST" action="{% url 'dashboard' %}">
              {% csrf_token %}
              <input type="hidden" name="action" value="delete_hero_logo" />
              <input type="hidden" name="course" value="{{ selected_course.id }}" />
              <input type="hidden" name="item_id" value="{{ item.id }}" />
              <button class="btn btn-sm btn-outline-danger" type="submit">Delete</button>
            </form>
          </div>
        </div>
      </div>
    {% empty %}
      <div class="col-12 text-muted">No collaboration logos yet.</div>
    {% endfor %}
  </div>
</div>

<div class="form-section">
  <div class="form-section-title">Hero CTA Buttons</div>
  <form method="POST" action="{% url 'dashboard' %}">
    {% csrf_token %}
    <input type="hidden" name="action" value="save_hero_button" />
    <input type="hidden" name="course" value="{{ selected_course.id }}" />
    <input type="hidden" name="item_id" value="{% if editing.hero_button %}{{ editing.hero_button.id }}{% endif %}" />
    <div class="row g-3 align-items-end">
      <div class="col-md-4">
        <label class="form-label">Label</label>
        <input type="text" class="form-control" name="label" value="{% if editing.hero_button %}{{ editing.hero_button.label }}{% endif %}" required />
      </div>
      <div class="col-md-5">
        <label class="form-label">URL</label>
        <input type="url" class="form-control" name="url" value="{% if editing.hero_button %}{{ editing.hero_button.url }}{% endif %}" required />
      </div>
      <div class="col-md-2">
        <label class="form-label">Style</label>
        <select class="form-select" name="style">
          <option value="primary" {% if editing.hero_button and editing.hero_button.style == 'primary' %}selected{% endif %}>Primary</option>
          <option value="secondary" {% if editing.hero_button and editing.hero_button.style == 'secondary' %}selected{% endif %}>Secondary</option>
          <option value="ghost" {% if editing.hero_button and editing.hero_button.style == 'ghost' %}selected{% endif %}>Ghost</option>
        </select>
      </div>
      <div class="col-md-1 text-end">
        <button class="btn btn-outline-primary" type="submit">{% if editing.hero_button %}Update{% else %}Add{% endif %}</button>
      </div>
    </div>
  </form>
  <ul class="list-group list-group-flush mt-3">
    {% for item in hero_buttons %}
      <li class="list-group-item d-flex align-items-center justify-content-between">
        <span>{{ item.label }} <small class="text-muted">({{ item.style }})</small></span>
        <div class="d-flex gap-2">
          <a class="btn btn-sm btn-ghost" href="{% url 'dashboard' %}?course={{ selected_course.id }}&section=hero&edit_key=hero_button&edit_id={{ item.id }}">Edit</a>
          <form method="POST" action="{% url 'dashboard' %}">
            {% csrf_token %}
            <input type="hidden" name="action" value="delete_hero_button" />
            <input type="hidden" name="course" value="{{ selected_course.id }}" />
            <input type="hidden" name="item_id" value="{{ item.id }}" />
            <button class="btn btn-sm btn-outline-danger" type="submit">Delete</button>
          </form>
        </div>
      </li>
    {% empty %}
      <li class="list-group-item text-muted">No CTA buttons yet.</li>
    {% endfor %}
  </ul>
</div>
