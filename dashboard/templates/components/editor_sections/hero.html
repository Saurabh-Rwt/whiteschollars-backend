<div class="form-section">
  <div class="form-section-title">Hero Intro Content</div>
  <p class="editor-note">Top heading block: heading, subheading, description, badge, and award details.</p>
  <form method="POST" enctype="multipart/form-data" action="{% url 'dashboard' %}">
    {% csrf_token %}
    <input type="hidden" name="action" value="save_hero" />
    <input type="hidden" name="course" value="{{ selected_course.id }}" />

    <div class="row g-3">
      <div class="col-md-8">
        <label class="form-label">Hero Heading</label>
        <input
          type="text"
          class="form-control"
          name="heading"
          value="{{ hero.heading|default:'' }}"
          placeholder="Data Science &amp; Generative AI"
          required
        />
      </div>
      <div class="col-md-4">
        <label class="form-label">Subheading</label>
        <input
          type="text"
          class="form-control"
          name="subheading"
          value="{{ hero.subheading|default:'' }}"
          placeholder="Certification Course In Hyderabad"
        />
      </div>

      <div class="col-12">
        <label class="form-label">Description</label>
        <div class="editor-note">Rich text: bold, italic, lists, links only.</div>
        <input type="hidden" name="description_html" id="hero-description-html" value="{{ hero.description_html|default:'' }}" />
        <div class="form-control" style="padding: 0;" data-quill data-target="hero-description-html"></div>
      </div>

      <div class="col-md-4">
        <label class="form-label">Badge Text</label>
        <input
          type="text"
          class="form-control"
          name="badge_text"
          value="{{ hero.badge_text|default:'' }}"
          placeholder="Job - Ready Course"
        />
      </div>
      <div class="col-md-4">
        <label class="form-label">Badge Icon</label>
        <input type="file" class="form-control" name="badge_icon" accept="image/*" />
        {% if hero.badge_icon %}
          <div class="media-preview">
            <img src="{{ hero.badge_icon.url }}" alt="{{ hero.badge_icon_alt|default:'Badge icon' }}" />
            <small class="text-muted">{{ hero.badge_icon_alt|default:'Badge icon' }}</small>
          </div>
        {% endif %}
      </div>
      <div class="col-md-4">
        <label class="form-label">Badge Icon Alt Text</label>
        <input
          type="text"
          class="form-control"
          name="badge_icon_alt"
          value="{{ hero.badge_icon_alt|default:'' }}"
          placeholder="Checkmark icon"
        />
      </div>

      <div class="col-md-4">
        <label class="form-label">Award Text</label>
        <input
          type="text"
          class="form-control"
          name="award_text"
          value="{{ hero.award_text|default:'' }}"
          placeholder="Awarded by Telangana Higher Education as Emerging EdTech of India"
        />
      </div>
      <div class="col-md-4">
        <label class="form-label">Award Logo</label>
        <input type="file" class="form-control" name="award_logo" accept="image/*" />
        {% if hero.award_logo %}
          <div class="media-preview">
            <img src="{{ hero.award_logo.url }}" alt="{{ hero.award_logo_alt|default:'Award logo' }}" />
            <small class="text-muted">{{ hero.award_logo_alt|default:'Award logo' }}</small>
          </div>
        {% endif %}
      </div>
      <div class="col-md-4">
        <label class="form-label">Award Logo Alt Text</label>
        <input
          type="text"
          class="form-control"
          name="award_logo_alt"
          value="{{ hero.award_logo_alt|default:'' }}"
          placeholder="Award seal logo"
        />
      </div>
    </div>

    <div class="mt-3 text-end">
      <button class="btn btn-primary" type="submit">Save Hero Intro</button>
    </div>
  </form>
</div>

<div class="form-section">
  <div class="form-section-title">Hero Checklist Points</div>
  <p class="editor-note">Add one point per line. These lines will be shown with check icons under the hero heading.</p>
  <form method="POST" action="{% url 'dashboard' %}">
    {% csrf_token %}
    <input type="hidden" name="action" value="save_hero_highlights_bulk" />
    <input type="hidden" name="course" value="{{ selected_course.id }}" />
    <div class="row g-3">
      <div class="col-12">
        <label class="form-label">Checklist Lines</label>
        <textarea
          class="form-control"
          name="highlights_text"
          rows="7"
          placeholder="Mode: Offline | Online | Live Recorded Sessions&#10;180 Hours of learning&#10;Guaranteed virtual internships with Accenture &amp; PWC"
        >{{ hero_highlights_text|default:'' }}</textarea>
      </div>
      <div class="col-12 text-end">
        <button class="btn btn-primary" type="submit">Save Checklist</button>
      </div>
    </div>
  </form>
</div>

<div class="form-section">
  <div class="form-section-title">Collaboration Heading</div>
  <p class="editor-note">This text appears above partner logos in hero section.</p>
  <form method="POST" action="{% url 'dashboard' %}">
    {% csrf_token %}
    <input type="hidden" name="action" value="save_hero" />
    <input type="hidden" name="course" value="{{ selected_course.id }}" />
    <div class="row g-3 align-items-end">
      <div class="col-md-10">
        <label class="form-label">Heading</label>
        <input
          type="text"
          class="form-control"
          name="collaboration_heading"
          value="{{ hero.collaboration_heading|default:'' }}"
          placeholder="In Collaboration With"
        />
      </div>
      <div class="col-md-2 text-end">
        <button class="btn btn-primary" type="submit">Save</button>
      </div>
    </div>
  </form>
</div>

<div class="form-section editor-entity-section">
  <div class="entity-header">
    <div>
      <div class="form-section-title mb-1">Collaboration Logos</div>
      <p class="editor-note mb-0">Add partner logos quickly and drag cards to arrange display order.</p>
    </div>
    <span class="entity-mode-badge" data-hero-logo-mode>{% if editing.hero_logo %}Editing logo{% else %}Add new logo{% endif %}</span>
  </div>
  <form method="POST" enctype="multipart/form-data" action="{% url 'dashboard' %}" data-hero-logo-form class="entity-form">
    {% csrf_token %}
    <input type="hidden" name="action" value="save_hero_logo" />
    <input type="hidden" name="course" value="{{ selected_course.id }}" />
    <input type="hidden" name="item_id" value="{% if editing.hero_logo %}{{ editing.hero_logo.id }}{% endif %}" data-hero-logo-item-id />
    <div class="row g-3">
      <div class="col-lg-5 col-md-6">
        <label class="form-label">Logo Image</label>
        <input type="file" class="form-control" name="image" accept="image/*" data-hero-logo-image {% if not editing.hero_logo %}required{% endif %} />
      </div>
      <div class="col-lg-7 col-md-6">
        <label class="form-label">Alt Text</label>
        <input
          type="text"
          class="form-control"
          name="image_alt"
          data-hero-logo-alt
          value="{% if editing.hero_logo %}{{ editing.hero_logo.image_alt }}{% endif %}"
          placeholder="Microsoft logo"
        />
      </div>
      <div class="col-12">
        <div class="entity-actions">
          <button class="btn btn-primary" type="submit" data-hero-logo-submit>{% if editing.hero_logo %}Update Logo{% else %}Add Logo{% endif %}</button>
          <button
            class="btn btn-outline-secondary {% if not editing.hero_logo %}d-none{% endif %}"
            type="button"
            data-hero-logo-cancel
          >
            Cancel
          </button>
        </div>
      </div>
    </div>
  </form>

  <div class="row g-2 mt-3" data-hero-logos-list>
    {% for item in hero_logos %}
      <div class="col-md-6" data-hero-logo-item="{{ item.id }}">
        <article class="entity-item">
          <div class="entity-main">
            <div class="entity-thumb-wrap">
              {% if item.image %}
                <img src="{{ item.image.url }}" alt="{{ item.image_alt|default:'Logo' }}" class="entity-thumb" />
              {% else %}
                <span class="entity-thumb-placeholder"><i class="bi bi-image"></i></span>
              {% endif %}
            </div>
            <div class="entity-text">
              <div class="entity-title text-truncate" data-hero-logo-label>{{ item.image_alt|default:'Logo' }}</div>
              <div class="entity-meta">Logo ID #{{ item.id }}</div>
            </div>
          </div>
          <div class="entity-item-actions">
            <button
              type="button"
              class="btn btn-sm btn-light entity-order-handle"
              data-hero-logo-handle
              title="Drag to reorder"
              aria-label="Drag to reorder logo"
            >
              <i class="bi bi-grip-vertical"></i>
            </button>
            <button
              type="button"
              class="btn btn-sm btn-outline-secondary"
              data-hero-logo-edit
              data-item-id="{{ item.id }}"
              data-image-alt="{{ item.image_alt|default:'' }}"
              data-image-url="{% if item.image %}{{ item.image.url }}{% endif %}"
              title="Edit logo"
              aria-label="Edit logo"
            >
              <i class="bi bi-pencil"></i>
            </button>
            <form method="POST" action="{% url 'dashboard' %}" class="d-inline">
              {% csrf_token %}
              <input type="hidden" name="action" value="delete_hero_logo" />
              <input type="hidden" name="course" value="{{ selected_course.id }}" />
              <input type="hidden" name="item_id" value="{{ item.id }}" />
              <button class="btn btn-sm btn-outline-danger" type="submit" title="Delete logo" aria-label="Delete logo">
                <i class="bi bi-trash"></i>
              </button>
            </form>
          </div>
        </article>
      </div>
    {% empty %}
      <div class="col-12" data-hero-logos-empty>
        <div class="entity-empty-state">No collaboration logos yet. Add your first partner logo above.</div>
      </div>
    {% endfor %}
  </div>
</div>

<div class="form-section editor-entity-section">
  <div class="entity-header">
    <div>
      <div class="form-section-title mb-1">Hero CTA Buttons</div>
      <p class="editor-note mb-0">Manage multiple CTA buttons and drag rows to set the order shown on the website.</p>
    </div>
    <span class="entity-mode-badge" data-hero-button-mode>{% if editing.hero_button %}Editing button{% else %}Add new button{% endif %}</span>
  </div>
  <form method="POST" action="{% url 'dashboard' %}" data-hero-button-form class="entity-form">
    {% csrf_token %}
    <input type="hidden" name="action" value="save_hero_button" />
    <input type="hidden" name="course" value="{{ selected_course.id }}" />
    <input type="hidden" name="item_id" value="{% if editing.hero_button %}{{ editing.hero_button.id }}{% endif %}" data-hero-button-item-id />
    <input type="hidden" name="icon_class" value="{% if editing.hero_button %}{{ editing.hero_button.icon_class }}{% endif %}" data-hero-button-icon-value />
    <div class="row g-3" data-action-scope>
      <div class="col-xl-4 col-md-6">
        <label class="form-label">Label</label>
        <input
          type="text"
          class="form-control"
          name="label"
          placeholder="Talk to Advisor"
          value="{% if editing.hero_button %}{{ editing.hero_button.label }}{% endif %}"
          required
        />
      </div>
      <div class="col-xl-3 col-md-6">
        <label class="form-label">On Click</label>
        <select class="form-select" name="action_type" data-action-select>
          <option value="link" {% if editing.hero_button and editing.hero_button.action_type == 'link' %}selected{% endif %}>Link</option>
          <option value="modal" {% if editing.hero_button and editing.hero_button.action_type == 'modal' %}selected{% endif %}>Open Modal</option>
        </select>
      </div>
      <div class="col-xl-3 col-md-8" data-action-field="link">
        <label class="form-label">URL</label>
        <input
          type="url"
          class="form-control"
          name="url"
          placeholder="https://example.com"
          value="{% if editing.hero_button %}{{ editing.hero_button.url }}{% endif %}"
        />
        <div class="editor-note">Use a brochure PDF link for downloads.</div>
      </div>
      <div class="col-xl-2 col-md-4">
        <label class="form-label">Style</label>
        <select class="form-select" name="style">
          <option value="primary" {% if editing.hero_button and editing.hero_button.style == 'primary' %}selected{% endif %}>Primary</option>
          <option value="secondary" {% if editing.hero_button and editing.hero_button.style == 'secondary' %}selected{% endif %}>Secondary</option>
          <option value="ghost" {% if editing.hero_button and editing.hero_button.style == 'ghost' %}selected{% endif %}>Ghost</option>
        </select>
      </div>
      <div class="col-xl-6 col-md-7">
        <label class="form-label">Icon</label>
        <div class="hero-icon-controls">
          <button type="button" class="btn btn-outline-secondary btn-sm" data-bs-toggle="modal" data-bs-target="#heroButtonIconModal">
            Choose
          </button>
          <button type="button" class="btn btn-outline-secondary btn-sm" data-hero-icon-clear>None</button>
        </div>
        <div class="hero-icon-selected{% if not editing.hero_button or not editing.hero_button.icon_class %} is-empty{% endif %}" data-hero-button-icon-preview>
          {% if editing.hero_button and editing.hero_button.icon_class %}
            <i class="bi {{ editing.hero_button.icon_class }}"></i>
            <span>Icon selected</span>
          {% else %}
            <i class="bi bi-slash-circle"></i>
            <span>No icon selected</span>
          {% endif %}
        </div>
      </div>
      <div class="col-xl-6 col-md-5 d-flex align-items-end justify-content-md-end">
        <div class="entity-actions hero-inline-actions">
          <button class="btn btn-primary" type="submit" data-hero-button-submit>{% if editing.hero_button %}Update Button{% else %}Add Button{% endif %}</button>
          <button
            class="btn btn-outline-secondary {% if not editing.hero_button %}d-none{% endif %}"
            type="button"
            data-hero-button-cancel
          >
            Cancel
          </button>
        </div>
      </div>
    </div>
  </form>
  <ul class="list-group list-group-flush mt-3 entity-list" data-hero-buttons-list>
    {% for item in hero_buttons %}
      <li class="list-group-item d-flex align-items-center justify-content-between" data-hero-button-item="{{ item.id }}">
        <div class="pe-3">
          <div class="entity-title d-flex align-items-center gap-2" data-hero-button-label>
            {% if item.icon_class %}
              <span class="entity-inline-icon"><i class="bi {{ item.icon_class }}"></i></span>
            {% endif %}
            <span>{{ item.label }}</span>
          </div>
          <div class="entity-tags">
            <span class="entity-tag">{{ item.style|title }}</span>
            <span class="entity-tag">{{ item.action_type|title }}</span>
            {% if item.action_type == 'link' and item.url %}
              <span class="entity-url" title="{{ item.url }}">{{ item.url }}</span>
            {% endif %}
          </div>
        </div>
        <div class="entity-item-actions" role="group" aria-label="Hero CTA actions">
          <button
            type="button"
            class="btn btn-sm btn-light entity-order-handle"
            data-hero-button-handle
            title="Drag to reorder"
            aria-label="Drag to reorder button"
          >
            <i class="bi bi-grip-vertical"></i>
          </button>
          <button
            type="button"
            class="btn btn-sm btn-outline-secondary"
            data-hero-button-edit
            data-item-id="{{ item.id }}"
            data-label="{{ item.label }}"
            data-action-type="{{ item.action_type }}"
            data-url="{{ item.url|default:'' }}"
            data-style="{{ item.style }}"
            data-icon-class="{{ item.icon_class|default:'' }}"
            title="Edit button"
            aria-label="Edit button"
          >
            <i class="bi bi-pencil"></i>
          </button>
          <form method="POST" action="{% url 'dashboard' %}" class="d-inline">
            {% csrf_token %}
            <input type="hidden" name="action" value="delete_hero_button" />
            <input type="hidden" name="course" value="{{ selected_course.id }}" />
            <input type="hidden" name="item_id" value="{{ item.id }}" />
            <button class="btn btn-sm btn-outline-danger" type="submit" title="Delete button" aria-label="Delete button">
              <i class="bi bi-trash"></i>
            </button>
          </form>
        </div>
      </li>
    {% empty %}
      <li class="list-group-item" data-hero-buttons-empty>
        <div class="entity-empty-state">No CTA buttons yet. Add your first hero CTA above.</div>
      </li>
    {% endfor %}
  </ul>
</div>

<div class="modal fade" id="heroButtonIconModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Choose Button Icon</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p class="editor-note mb-3">Pick one icon from the list. Choose "No icon" to show text-only button.</p>
        <div class="hero-icon-grid">
          {% for icon in hero_button_icons %}
            <button
              type="button"
              class="btn btn-outline-secondary hero-icon-option{% if editing.hero_button and editing.hero_button.icon_class == icon.value %} active{% endif %}"
              data-hero-icon-option="{{ icon.value }}"
              data-hero-icon-label="{{ icon.label }}"
              data-bs-dismiss="modal"
            >
              {% if icon.icon_class %}
                <i class="bi {{ icon.icon_class }}"></i>
              {% else %}
                <i class="bi bi-slash-circle"></i>
              {% endif %}
              <span>{{ icon.label }}</span>
            </button>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>

<div class="form-section">
  <div class="form-section-title">Hero Media</div>
  <p class="editor-note">Choose image or video for the right side of hero section.</p>
  <form method="POST" enctype="multipart/form-data" action="{% url 'dashboard' %}">
    {% csrf_token %}
    <input type="hidden" name="action" value="save_hero" />
    <input type="hidden" name="course" value="{{ selected_course.id }}" />

    <div class="row g-3 hero-media-layout" data-hero-media-scope>
      <div class="col-lg-4 col-md-6">
        <label class="form-label">Media Type</label>
        <select class="form-select" name="media_type" data-hero-media-select>
          <option value="image" {% if hero.media_type == 'image' or not hero.media_type %}selected{% endif %}>Image</option>
          <option value="video" {% if hero.media_type == 'video' %}selected{% endif %}>Video</option>
        </select>
        <div class="editor-note mt-1 hero-media-help" data-hero-media-help="image">Use a hero image for static visual.</div>
        <div class="editor-note mt-1 hero-media-help" data-hero-media-help="video">Play button opens modal with embedded video + lead form.</div>
      </div>

      <div class="col-lg-8 col-md-6" data-hero-media-field="image">
        <label class="form-label">Hero Image</label>
        <input type="file" class="form-control" name="hero_image" accept="image/*" />
        <div class="editor-note mt-1">Recommended ratio: 16:9</div>
        {% if hero.hero_image %}
          <div class="media-preview">
            <img src="{{ hero.hero_image.url }}" alt="{{ hero.hero_image_alt|default:'Hero image' }}" />
            <small class="text-muted">{{ hero.hero_image_alt|default:'Hero image' }}</small>
          </div>
        {% endif %}
      </div>
      <div class="col-lg-6 col-md-6" data-hero-media-field="image">
        <label class="form-label">Hero Image Alt Text</label>
        <input
          type="text"
          class="form-control"
          name="hero_image_alt"
          value="{{ hero.hero_image_alt|default:'' }}"
          placeholder="Students learning from mentor"
        />
      </div>

      <div class="col-lg-8 col-md-6" data-hero-media-field="video">
        <label class="form-label">Hero Video URL</label>
        <input
          type="url"
          class="form-control"
          name="hero_video_url"
          value="{{ hero.hero_video_url|default:'' }}"
          placeholder="https://www.youtube.com/watch?v=..."
        />
      </div>
      <div class="col-lg-6 col-md-6" data-hero-media-field="video">
        <label class="form-label">Video Thumbnail</label>
        <input type="file" class="form-control" name="hero_video_thumbnail" accept="image/*" />
        {% if hero.hero_video_thumbnail %}
          <div class="media-preview">
            <img src="{{ hero.hero_video_thumbnail.url }}" alt="{{ hero.hero_video_thumbnail_alt|default:'Video thumbnail' }}" />
            <small class="text-muted">{{ hero.hero_video_thumbnail_alt|default:'Video thumbnail' }}</small>
          </div>
        {% endif %}
      </div>
      <div class="col-lg-6 col-md-6" data-hero-media-field="video">
        <label class="form-label">Thumbnail Alt Text</label>
        <input
          type="text"
          class="form-control"
          name="hero_video_thumbnail_alt"
          value="{{ hero.hero_video_thumbnail_alt|default:'' }}"
          placeholder="Course intro video thumbnail"
        />
      </div>

      <div class="col-12 hero-media-actions">
        <button class="btn btn-primary" type="submit">Save Hero Media</button>
      </div>
    </div>
  </form>
</div>

